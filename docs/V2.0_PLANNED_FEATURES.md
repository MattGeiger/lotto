# v2.0 Planned Features

**Status:** Planning  
**Working branch:** `codex/welcome-page`  
**Release intent:** v2.0 major upgrade  
**Scope:** Introduce a distinct Arcade product area with launch game support

---

## Summary

Version 2.0 introduces a new **Arcade** section that is intentionally separated from the raffle experience.

The v2.0 launch includes:

1. A dedicated Arcade page with retro 8-bit visual direction.
2. An always-visible top banner showing **NOW SERVING** so clients can still monitor queue progress.
3. A game selection menu on the Arcade page.
4. Snake as the first playable game.
5. A personalized homepage preview track on `/new` that preserves the existing visual language while enabling tailored user experiences, with future promotion to `/` planned.
6. Public-board routes at `/` and `/display` that remain operational while `/new` evolves.

Additional games are planned after launch.

---

## Current Implementation Checkpoint (2026-02-18)

- Completed: Dedicated `/arcade` and `/arcade/snake` routes with Arcade-scoped layout/styling.
- Completed: Persistent `NOW SERVING` Arcade banner with adaptive polling parity to the display strategy.
- Completed: Added dedicated `/display` route as the canonical public-board URL and decoupled it from direct `/` re-export wiring.
- Completed: Staff “View Public Board” CTA now targets `/display` to keep operational usage on the stable route.
- Completed: Personalized homepage (`/new`) QR panel removed as the first personalization step, while `/` and `/display` retain the existing QR-enabled board experience.
- Completed: Personalized homepage (`/new`) top-bar search feature removed and replaced with centered WTH branding, while `/` and `/display` keep the existing search-enabled operational board.
- Completed: Personalized homepage (`/new`) redundant board-row logo removed so `NOW SERVING` remains centered under the top-bar branding; `/` and `/display` keep the original board-row logo.
- Completed: Personalized homepage (`/new`) now shows a load-time “Choose your language” modal with per-language buttons wired to the shared language selector state.
- Completed: Homepage language-picker modal title now cycles through all supported languages every 5 seconds using the same morph-text animation style as language-switch transitions.
- Completed: Personalized homepage onboarding modal now runs as a two-step flow (language selection, then ticket entry), with ticket normalization for deli-style formats (`C17`, `B07`, or `53`) into the shared numeric search path (`00`-`99`).
- Completed: Personalized homepage (`/new`) drawing-order card now supports a personalized ticket variant (`YOUR TICKET`) with inline wait/ahead/position rows, ticket-status notes, not-yet-in-draw fallback messaging, and a `CHANGE TICKET` recovery action.
- Completed: Personalized homepage ticket rendering is isolated to `/new`, while `/` and `/display` remain the operational full-board experience (ticket grid + legend + search/modal flow).
- Completed: Homepage ticket selection now persists client-side across refreshes using browser storage and automatically expires at local midnight to avoid carrying stale ticket state into the next service day.
- Completed: Route swap for production testing: `/` now serves the public board, `/new` serves the personalized homepage flow, and `/display` remains a live non-redirecting public-board alias.
- Completed: v1.5.0 release framing treats `/new` as the homepage preview path (future promotion target) and `/arcade` as a preview surface with one launch game (`Snake`).
- Completed: Arcade menu UI and Snake navigation shell with stable board container + mobile D-pad controls.
- Completed: Mobile usability scaffolding (`PLAY NOW` focus jump, on-screen controls, keyboard input capture shell).
- Completed: Snake navigation increment with fixed 3-segment movement and collision-based game-over/restart flow.
- Completed: Snake food pellet spawn and score increment loop with growth-on-food enabled.
- Completed: Snake pause/resume control flow and non-obscuring readout placement (stats moved outside the board).
- Completed: Snake accessibility controls consolidated into one six-level settings slider (`VERY EASY` -> `NIGHTMARE`) combining speed tiers, wall-distance spawn gating, and Nightmare pellet timeout respawn.
- Completed: Arcade `NOW SERVING` update alert treatment tuned for retro visibility while preserving the section aesthetic.
- Completed: Arcade banner now checks persisted homepage ticket selection and, when present, swaps to `ESTIMATED WAIT` with `#h #m` output instead of `NOW SERVING`.
- Completed: Called-ticket events from the Arcade banner now pause active Snake runs and trigger a confetti celebration overlay.
- Completed: Tracked-ticket banner wait output now uses conditional full units (`# minutes` under one hour; `# hours # minutes` otherwise), removes the wait-value frame border, and scales down `ESTIMATED WAIT` label typography to fit longer localized strings.
- Completed: Arabic/Persian/Chinese locale text scaling now also applies to Snake-local UI lines (`SCORE`, `LENGTH`, `SETTING: ...`, and center `START`/`PAUSE`/`PLAY`) to improve readability within gameplay and settings surfaces.
- Completed: Snake board rendering now uses one canvas for grid + entities, eliminating small-screen cell drift caused by separate CSS-grid and DOM-layer rounding.
- Completed: When a tracked ticket is called, Arcade now swaps banner copy to an explicit check-in callout (`TICKET CALLED!` / `PLEASE CHECK-IN`), animates that callout to viewport center for 10 seconds, and repeats confetti effects during that alert interval.
- Completed: The called-state check-in callout now uses a fixed centered overlay with responsive text constraints so long localized strings do not crop during center-scale animation on smaller devices.
- Completed: The called-state overlay now applies runtime client-side fit scaling from measured text bounds, preventing clipping for long localized callout copy (for example, Russian) during center-scale animation.
- Completed: While the ticket-called animation is active, Arcade applies a temporary dimmed backdrop behind the centered check-in callout to match `GAME OVER` visual emphasis.
- Completed: During the ticket-called overlay interval, Arcade keeps the top banner populated with `NOW SERVING: #<ticket>` to preserve queue visibility context.
- Completed: Ticket-called center overlay lifecycle is now bounded to active alert state and is dismissed immediately on Arcade resume events so it does not obstruct gameplay.
- In progress: Snake game-loop hardening tasks.
- Pending: Snake engine tests and final MVP validation criteria before v2.0 release.

---

## Alignment With Project Guardrails

- **WITHIN existing patterns:** Arcade is implemented as its own route group and feature boundary, not inside the public display page.
- **WITHIN existing patterns:** Arcade styling is scoped to Arcade; raffle theme and UI patterns remain unchanged.
- **WITHIN existing patterns:** Snake game logic is independent from raffle state APIs and raffle UI components.
- **WITHIN existing patterns:** `/` and `/display` are public-board routes while homepage customization work is isolated to `/new`.

References:
- `AGENTS.md` Arcade Guardrails
- `docs/GAME.md` separation-first game architecture

---

## v2.0 Product Goals

1. Make Arcade feel like its own mini-product area in both code and UX.
2. Preserve queue visibility by keeping **NOW SERVING** always visible during Arcade usage.
3. Ship a clean game-launch flow with Snake as the initial offering.
4. Establish a scalable foundation for adding future simple games.

---

## In Scope (v2.0)

### 1) Dedicated Arcade Surface
- Add a dedicated Arcade route and layout (`/arcade` and `/arcade/*`).
- Keep Arcade code isolated under Arcade-specific folders.

### 2) Persistent Queue Awareness Banner
- Show a top banner with **NOW SERVING** on all Arcade pages.
- Banner remains visible while browsing the game menu and while playing Snake.
- Banner should prioritize legibility and low cognitive load.

### 3) Arcade Menu (Launch)
- Provide a simple game selection menu on `/arcade`.
- Include a primary CTA/button to start Snake.
- Keep menu structure ready for adding future game entries.

### 4) Snake Launch Game
- Deliver a playable Snake MVP for mobile and desktop browser contexts.
- Keep Snake gameplay separate from raffle UI/state semantics.

### 5) Retro 8-bit Visual Direction
- Apply pixel-art style graphics and UI treatment for Arcade surfaces.
- Keep this visual system scoped to Arcade.

### 6) Homepage Personalization Track (Non-Arcade)
- Evolve `/new` toward a more personalized experience while preserving the current look-and-feel baseline.
- Keep `/` and `/display` as public-board destinations throughout this track.
- Route operational/staff board access to `/display` to avoid disruption during homepage iteration.

---

## Out of Scope (v2.0)

- Embedding game content into `/` or `src/components/readonly-display.tsx`.
- Reusing raffle-specific UI elements for Snake (ticket grid/status classes/queue legend patterns).
- Coupling gameplay to `/api/state` write flows.
- Multi-game release beyond Snake (other games deferred to post-v2.0 iterations).
- Altering `/display` behavior/visual treatment as part of homepage personalization work.

---

## Proposed Route and Feature Shape

```text
src/
  app/
    (arcade)/
      arcade/
        layout.tsx      # includes persistent NOW SERVING top banner
        page.tsx        # game selection menu
        snake/
          page.tsx      # launch game
  arcade/
    components/
    ui/
    game/
    hooks/
    styles/
```

---

## UX Requirements (v2.0)

1. **Always-visible NOW SERVING:** The top banner remains present during gameplay.
2. **Fast entry to play:** User can reach Snake in one tap/click from Arcade menu.
3. **Clear separation:** Arcade should not visually resemble raffle display/admin surfaces.
4. **Mobile first:** Menu and Snake controls must be usable in simulated mobile testing.

---

## Acceptance Criteria

- `/arcade` renders a game selection menu with a Snake launch button.
- `/arcade/snake` is playable and preserves the persistent top **NOW SERVING** banner.
- Arcade UI uses retro/pixel direction and does not reuse raffle-specific UI patterns.
- Arcade implementation remains isolated from raffle display component architecture.
- `/` and `/display` remain the unchanged public-board experience while personalization changes are introduced on `/new`.
- `/staff` board CTA routes to `/display` (not `/`) to preserve stable operations during homepage iteration.
- Design and behavior are validated in local mobile simulation before production rollout.

---

## Post-v2.0 Follow-ons (Planned)

- Add additional simple games to the menu.
- Expand Arcade polish and progression features after Snake launch stability.
- Evaluate optional local-only score retention and per-game settings.

---

**Document Version:** 1.7  
**Last Updated:** 2026-02-18  
**Owner:** Arcade planning (v2.0 track)
