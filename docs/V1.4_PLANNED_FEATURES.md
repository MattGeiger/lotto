# v1.4.0 Planned Features

**Status:** Phase 1 Complete (Phase 2 Planned)  
**Target branch:** `dev`  
**Scope:** UI/UX enhancements only (no state model changes)  
**Last updated:** February 11, 2026

---

## Summary

Version 1.4.0 focuses on two major UI upgrades:

1. Add a high-contrast accessibility theme option (`Hi-viz`) that sits alongside the current light/dark/system choices.
2. Add motion enhancements using Animate UI (components + icons) to improve perceived responsiveness and touch feedback.

Both features must preserve existing safety-critical UX behavior in admin/public flows and must not reduce clarity for vulnerable users.

---

## Alignment With Existing Patterns

- **WITHIN existing patterns:** Theme is still token-driven (`src/app/globals.css`) and uses shadcn/Next Themes architecture already present in the app.
- **WITHIN existing patterns:** Motion additions are component-level and can be introduced progressively in the same TSX + shadcn workflow.
- **Constraint:** Motion must remain subordinate to legibility, queue clarity, and safety requirements from `docs/UX_REQUIREMENTS.md`.

---

## Feature 1: High-Contrast Theme (`Hi-viz`)

### UX Intent

- Improve legibility for visually impaired users with stronger contrast and clearer boundaries.
- Keep existing user mental model intact: same switcher, same placement, same quick access.
- Maintain default behavior: app follows device preference unless user chooses otherwise.

### Theme Menu (Planned)

- `(lucide:sun) Light`
- `(lucide:moon) Dark`
- `(lucide:sun-moon) System`
- `(lucide:view) Hi-viz`

### Design Source

- Candidate token set lives in: `docs/HC_UI.md` (generated via TweakCN and already formatted for Tailwind v4 variable mapping).

### Architecture Decision

To support `Hi-viz` cleanly without breaking `system` behavior, treat theme as two concerns:

1. **Color scheme:** `light | dark | system`
2. **Contrast mode:** `default | hi-viz`

This avoids overloading a single theme string and lets Hi-viz still honor dark/light device mode when desired.

### Planned Implementation Tasks

1. Extend theme state/provider to include contrast mode persistence.
2. Update theme switcher UI to render icon+label items and the new `Hi-viz` action.
3. Add high-contrast token namespace in `src/app/globals.css`.
4. Map `docs/HC_UI.md` values into `:root`/`.dark` overrides scoped by a class (example: `.hi-viz`).
5. Ensure Sonner/toast colors follow high-contrast tokens.
6. Validate logo, badge, card, input, and control legibility in all combinations.

### Planned File Touchpoints

- `src/components/theme-provider.tsx`
- `src/components/theme-switcher.tsx`
- `src/app/globals.css`
- `src/components/ui/sonner.tsx`
- `src/app/page.tsx`
- `src/app/admin/page.tsx`

### Accessibility Requirements

- WCAG AA minimum contrast for normal text and interactive controls.
- Focus ring contrast must remain strong in all theme states.
- Theme choice must be keyboard reachable and screen-reader understandable.
- No hidden state changes; current selection must be visually obvious.

### Acceptance Criteria (Feature 1)

- Theme menu shows four items with icons and labels.
- `System` follows OS dark/light preference by default.
- `Hi-viz` can be enabled from the same menu and persists across refresh.
- Public display, admin, and login/staff pages remain readable and consistent.
- No regressions in existing dark/light behavior.

---

## Feature 2: Motion Enhancements (Animate UI)

### UX Intent

- Improve perceived fluidity and tactile feedback, especially on touch screens.
- Use meaningful motion to support state understanding (not decoration-heavy animation).
- Keep interactions fast and understandable in high-stress staff workflows.

### Motion Principles

- Motion clarifies intent: entry, hover/tap feedback, state transition.
- Motion never obscures critical information (ticket numbers, now-serving state, warnings).
- Motion respects user preferences (`prefers-reduced-motion`).
- Fast timings by default; avoid long or looping animation in operational controls.

### Animate UI Integration Notes

- Animate UI follows the shadcn distribution model (`shadcn add ...`) and installs components into project code.
- Animated icons are marked **beta** in Animate UI docs; wrap rollout with guardrails and selective adoption.
- Primary docs:
  - https://animate-ui.com/docs
  - https://animate-ui.com/docs/icons
  - https://animate-ui.com/docs/icons/get-started

### Planned Motion Targets

1. Header controls: theme switcher, language switcher, search action.
2. Cards/dialogs: enter/exit transitions for non-critical layout changes.
3. Feedback states: action pending/success/error micro-transitions.
4. Lucide icon replacements where animated variants improve affordance.

### Non-Goals (v1.4.0)

- No full-page cinematic transitions.
- No animation that delays task completion.
- No motion that changes or obscures queue order/state interpretation.

### Planned Implementation Tasks

1. Introduce Animate UI primitives/icons in selected, high-value controls first.
2. Define shared motion tokens (duration/ease/distance) in CSS utilities.
3. Add reduced-motion fallbacks for all new animated elements.
4. Keep critical admin actions deterministic and immediate.
5. Tune mobile touch interactions for responsiveness.

### Planned File Touchpoints

- `src/components/theme-switcher.tsx`
- `src/components/language-switcher.tsx`
- `src/app/page.tsx`
- `src/app/admin/page.tsx`
- `src/components/ui/*` (selected components only)
- `src/app/globals.css` (motion tokens/utilities)

### Acceptance Criteria (Feature 2)

- Interactive controls have consistent, subtle motion feedback.
- Motion is disabled or simplified when reduced-motion is enabled.
- Performance remains smooth on mobile and low-power devices.
- No safety-critical UX regressions in admin/public flows.

---

## Delivery Plan

### Phase 1: Theme Architecture + Hi-viz Foundation (Completed - February 11, 2026)

- Added contrast mode infrastructure and persistence.
- Implemented menu changes + icon labels.
- Introduced high-contrast tokens and scope classes.
- Validated all pages in light/dark/system/hi-viz combinations.

### Phase 2: Motion Foundation

- Add motion primitives/tokens.
- Ship animated icons for high-value header controls.
- Add reduced-motion guardrails.

### Phase 3: Motion Expansion + Hardening

- Expand to selected cards/dialogs/feedback states.
- Run accessibility/performance QA pass.
- Final polish and regression tests before release.

---

## Testing Plan

### Functional

- Theme selection persists and restores correctly.
- System mode correctly tracks OS dark/light.
- Hi-viz applies correct token set in light/dark environments.
- Existing admin actions (generate/append/serving/reset/history) behave unchanged.

### Accessibility

- Keyboard-only navigation for switchers and dialogs.
- Screen-reader labels for all new controls/icons.
- Contrast checks across core screens and status states.
- Reduced-motion behavior validation.

### Performance

- Compare interaction responsiveness before/after motion integration.
- Verify no visible jank on touch devices.
- Validate that polling/display cadence behavior is unaffected.

---

## Risks and Mitigations

- **Risk:** Theme complexity increases with two-axis state.  
  **Mitigation:** Keep clear separation between color-scheme and contrast mode, with explicit persistence keys.

- **Risk:** Animate UI icon API changes (beta).  
  **Mitigation:** Introduce a local wrapper layer for animated icons to isolate future API churn.

- **Risk:** Motion reduces clarity in high-stress workflows.  
  **Mitigation:** Constrain motion to short, purposeful transitions and disable where task critical.

- **Risk:** Contrast regressions in custom gradient/status tokens.  
  **Mitigation:** Validate token pairs directly and fallback to solid high-contrast alternatives where needed.

---

## Definition of Done (v1.4.0)

- Hi-viz theme shipped and stable with system default behavior preserved.
- Theme menu shows Light/Dark/System/Hi-viz with Lucide icons.
- Motion enhancements shipped for targeted interactions with reduced-motion support.
- No regressions in safety-critical queue workflows.
- Docs updated to reflect final implementation details and usage guidance.
